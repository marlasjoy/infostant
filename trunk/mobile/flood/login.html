<html><head>
<meta content="initial-scale=1.0, user-scalable=no" name="viewport">
         <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>PhoneGap</title>
        <link type="text/css" rel="stylesheet" href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css">  
        <script type="text/javascript" charset="utf-8" src="phonegap-1.2.0.js"></script>
        <script src="http://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
        <link rel="stylesheet" href="jquery.mobile-1.0rc2/jquery.mobile-1.0rc2.min.css" /> 

        <script src="jquery-1.6.4.min.js"></script> 
                 <script src="jquery-cookie/jquery.cookie.js"></script>  
         <script>
         var pictureSource;   // picture source
         var destinationType; // sets the format of returned value  
         var imageURI="";
         var webdir="http://www.infostant.com";
         document.addEventListener("deviceready", onDeviceReady, false);  
             function PictureSourceType() {};
             PictureSourceType.PHOTO_LIBRARY = 0;
             PictureSourceType.CAMERA = 1;

               function reachableCallback(reachability) {
                 
                 // There is no consistency on the format of reachability
                 
                 var networkState = reachability.code || reachability;
                 
                 var states = {};
                 
                 states[NetworkStatus.NOT_REACHABLE]                      = 'No network connection';
                 
                 states[NetworkStatus.REACHABLE_VIA_CARRIER_DATA_NETWORK] = 'Carrier data connection';
                 
                 states[NetworkStatus.REACHABLE_VIA_WIFI_NETWORK]         = 'WiFi connection';
                 
                // navigator.notification.alert('Connection type: ' + states[networkState]);
                 
             }
              function responseformserver(myObject)
             {
                 navigator.notification.alert(myObject.title); 
             }

            
      
             
             // PhoneGap is loaded and it is now safe to make calls PhoneGap methods
             
             function onDeviceReady() {
                 //?navigator.notification.alert('');  
                 navigator.network.isReachable('phonegap.com', reachableCallback);
                 pictureSource=navigator.camera.PictureSourceType;
                 destinationType=navigator.camera.DestinationType;
                 
             }
             $( function() {
               
               $('#searchButton').click(function() {
                                        loadajax();
                                        });
               $('#search2Button').click(function() {
                                         $('.ui-listview').html('');
                                         $('#searchBox').val(''); 
                                         });                         
               $('#recentButton').click(function() {
                                        $('#searchBox').val('');
                                        loadajax();
                                        });                         
               
               
               
               });
             function getPicture(sourceType)
             {
                 var options = { quality: 30 };
                 if (sourceType != undefined) {
                     options["sourceType"] = sourceType;
                     
                 }
                 // if no sourceType specified, the default is CAMERA 
                 navigator.camera.getPicture(getPicture_Success, onFail, options);
             }
             function getPicture_Success(imageData)
             {
                 imageURI=imageData;
                 //alert("getpic success");
                 document.getElementById("test_img").src = "data:image/jpeg;base64," + imageData;
                 
                 
             }
             function capturePhoto() {
                 // Take picture using device camera and retrieve image as base64-encoded string
                 navigator.camera.getPicture(getPicture_Success, onFail, { quality: 50 });
             }
             function onFail(message) {
                 navigator.notification.alert('Failed because: ' + message);
             }



     
         </script>
        <script src="jquery.mobile-1.0rc2/jquery.mobile-1.0rc2.min.js"></script>
        
        <script src="flood.js"></script> 
         <script>
         function submitlogin() {  
         $.post(webdir+'/ajax/loginformiphone',{
             username:$('#username').val()
             ,password1:$('#password1').val()
         
         
         }, function(data) { 
             
                                      var myObject = eval('(' + data + ')'); 
                                      
                           if(myObject.error)
                           {
                              navigator.notification.alert(myObject.error); 
                           
                           } else
                           {
                               if(!$.cookie('username')){
                             //  setCookie('username',myObject.username,36500000);
                             //  setCookie('userid',myObject.mid,36500000);  
                             $.cookie('username', myObject.username, { expires: 365 });
                             $.cookie('userid', myObject.mid, { expires: 365 });    
                               }
                              navigator.notification.alert('login เรียบร้อยแล้ว'); 
                               
                           } 
             
             
         });
         
         }
           //  $(document).ready(function() {  
             // Handler for .ready() called.
              
            //  alert(getCookie('userid'));  
          
         //    });
         </script>

        
    </head>
    
    <body >
                      <header>
                      </header> 
           <article>             
 <div data-role="page" id="login"> 
        <div data-role="header" >   
               <h1>เข้าสู่ระบบ</h1>
  
               <a href="javascript:void(0);" onclick="location.href='index.html'" id="recentButton" data-role="button">กลับไปหน้าหลัก</a>

        </div>      
               <div class="content-primary">
               <h2>Member Information</h2>   
               <div id="loginform" class="ui-body ui-body-c">   
               <div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">    
                 <label for="name-c" class="ui-input-text">ชื่อสมาชิก:</label>
                 <input type="text" value="" id="username" name="username" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset">
               </div> 
               <div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">    
                 <label for="name-c" class="ui-input-text">รหัสผ่าน:</label>
                 <input type="password" value="" id="password1" name="password1" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset">
               </div>
                <div class="ui-body ui-body-c">
                  <fieldset class="ui-grid-a">
                  <input type="hidden" id="cat" name="cat" value="16"><input type="hidden" id="subcat" name="subcat" value="138"> <input type="hidden" id="userid" name="userid" value="">
                <div class="ui-block-a"><button data-theme="d" type="button" class="ui-btn-hidden" aria-disabled="false">Cancel</button></div>
                <div class="ui-block-b"><button data-theme="a" id="buttonSave" name="buttonSave" onclick="submitlogin()"   type="button" class="ui-btn-hidden" aria-disabled="false">Login</button></div>
                </fieldset>
                </div>
               
               </div>
                </div>
            
        </div>
            </article> 
            <script>
                if($.cookie('userid'))
                {
                    //$("#userid").val(getCookie('userid'));  
                    $("#login").hide();  
                }else
                {
                    $("#login").show();
                }
                navigator.notification.alert(''); 
            </script>
            <footer>  

    </footer>
    </body>
    
</html>