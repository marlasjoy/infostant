/* RoyalSlider Copyright 2011, developed Dmitry Semenov */
(function($){function RoyalSlider(b,c){this.slider=$(b);var d=this;this.settings=$.extend({},$.fn.royalSlider.defaults,c);this.isSlideshowRunning=false;this._az=false;this._by=this.slider.find(".royalSlidesContainer");this._cx=this._by.wrap('<div class="royalWrapper"/>').parent();this.slides=this._by.find(".royalSlide");this._dw="<p class='royalPreloader'>Loading image...</p>";this._ev=false;this._fu=false;if("ontouchstart"in window){if(!this.settings.disableTranslate3d){if(('WebKitCSSMatrix'in window&&'m11'in new WebKitCSSMatrix())){this._by.css({"-webkit-transform-origin":"0 0","-webkit-transform":"translateZ(0)"});this._fu=true}}this.hasTouch=true;this._gt="touchstart.rs";this._hs="touchmove.rs";this._ir="touchend.rs"}else{this.hasTouch=false;this._gt="mousedown.rs";this._hs="mousemove.rs";this._ir="mouseup.rs"}if(this.hasTouch){this.settings.directionNavAutoHide=false;this.settings.hideArrowOnLastSlide=true}this.slidesArr=[];var f,jqSlide,dataSRC,o;this.slides.each(function(){jqSlide=$(this);f={};f.slide=jqSlide;if(d.settings.blockLinksOnDrag){var a=this.hasTouch?'touchend.royalslider':'click.royalslider';jqSlide.find('a').bind(a,function(e){if(d._ev){e.preventDefault();return false}})}if(d.settings.nonDraggableClassEnabled){jqSlide.find('.non-draggable').bind(d._gt,function(e){d._ev=false;return false})}dataSRC=jqSlide.attr("data-src");if(dataSRC==undefined||dataSRC==""||dataSRC=="none"){f.preload=false}else{f.preload=true;f.preloadURL=dataSRC}if(d.settings.captionAnimationEnabled){f.caption=jqSlide.find(".royalCaption").css("display","none")}d.slidesArr.push(f)});this._jq=false;if(this.settings.removeCaptionsOpacityInIE8){if($.browser.msie&&parseInt($.browser.version,10)<=8){this._jq=true}}this.slider.css("overflow","visible");this.slideWidth=0;this.slideHeight=0;this.slideshowTimer='';this.numSlides=this.slides.length;this.currentSlideId=this.settings.startSlideIndex;this.lastSlideId=-1;this.isAnimating=true;this.wasSlideshowPlaying=false;this._kp=0;this._lo=0;this.mn=[];this._az1=[];this._by1=false;this._cx1=0;this._dw1=0;this._ev1=0;this._fu1=0;this._gt1=false;this._hs1=false;if(this.settings.slideshowEnabled&&this.settings.slideshowDelay>0){if(this.settings.slideshowPauseOnHover){this.slider.hover(function(){d._hs1=true;d._ir1(true)},function(){d._hs1=false;d._jq1(true)})}this.slideshowEnabled=true}else{this.slideshowEnabled=false}var g="";if($.browser.msie){if(parseInt($.browser.version,10)==7){this.isIE7=true;this._by.css("cursor","move")}}else{this.isIE7=false}if($.browser.opera){_kp1="move";_lo1="move"}else{if($.browser.mozilla){_kp1="-moz-grab";_lo1="-moz-grabbing"}else{_kp1="url(img/cursors/grab.cur), move";_lo1="url(img/cursors/grabbing.cur), move"}_kp1=$.browser.mozilla?"-moz-grab":"url(img/cursors/grab.cur), move";_lo1=$.browser.mozilla?"-moz-grabbing":"url(img/cursors/grabbing.cur), move"}this._mn1();if(this.settings.controlNavEnabled){var h;var i;if(!d.settings.controlNavThumbs){i=$('<div class="royalControlNavOverflow"><div class="royalControlNavContainer"><div class="royalControlNavCenterer"></div></div></div>');h=i.find('.royalControlNavCenterer')}else{if(d.settings.controlNavThumbsNavigation){this.thumbsArrowLeft=$("<a href='#' class='thumbsArrow left'></a>");this.thumbsArrowRight=$("<a href='#' class='thumbsArrow right'></a>");this._cx.after(this.thumbsArrowLeft);this._cx.after(this.thumbsArrowRight);var j=parseInt(this.thumbsArrowLeft.outerWidth(),10);i=$('<div class="royalControlNavOverflow royalThumbs" style="left:'+j+'px; width:'+(this.slider.width()-j-parseInt(this.thumbsArrowRight.outerWidth(),10))+'px;"><div class="royalControlNavThumbsContainer"></div></div>');h=i.find('.royalControlNavThumbsContainer')}else{i=$('<div class="royalControlNavOverflow royalThumbs"><div class="royalControlNavContainer"><div class="royalControlNavCenterer"></div></div></div>');h=i.find(".royalControlNavCenterer")}}var k=0;this.slides.each(function(){if(d.settings.controlNavThumbs){h.append("<a href='#' class='royalThumb' style='background-image:url("+$(this).attr("data-thumb")+");'/>")}else{h.append('<a href="#"/>')}k++});this.navItems=h.children();this._cx.after(i);if(d.settings.controlNavThumbs&&d.settings.controlNavThumbsNavigation){this._cx2=true;this._dw2=false;this._ev2=h;if(this._fu){this._ev2.css({'-webkit-transition-duration':this.settings.controlNavThumbsSpeed+"ms",'-webkit-transition-property':'-webkit-transform','-webkit-transition-timing-function':"ease-in-out"})}this._fu2=parseInt(i.width(),10);this._gt2=k;var l=this.navItems.eq(0);this._hs2=l.outerWidth(true);this._ir2=this._hs2*this._gt2;this._ev2.css("width",this._ir2);this._jq2=parseInt(l.css("marginRight"),10);this._ir2-=this._jq2;this._kp2=0;this._lo2=-(this._ir2-this._fu2);if(this._fu2>=this._ir2){this._dw2=true;this.thumbsArrowRight.addClass("disabled");this.settings.controlNavThumbsNavigation=false}this.thumbsArrowLeft.click(function(e){e.preventDefault();if(!d._cx2)d._mn2(d._kp2+d._fu2+d._jq2)});this.thumbsArrowRight.click(function(e){e.preventDefault();if(!d._dw2)d._mn2(d._kp2-d._fu2-d._jq2)})}this._az3()}if(this.settings.directionNavEnabled){this._cx.after("<a href='#' class='arrow left'/>");this._cx.after("<a href='#' class='arrow right'/>");this.arrowLeft=this.slider.find("a.arrow.left");this.arrowRight=this.slider.find("a.arrow.right");if(this.arrowLeft.length<1||this.arrowRight.length<1){this.settings.directionNavEnabled=false}else if(this.settings.directionNavAutoHide){this.arrowLeft.hide();this.arrowRight.hide();this.slider.one("mousemove.arrowshover",function(){d.arrowLeft.fadeIn("fast");d.arrowRight.fadeIn("fast")});this.slider.hover(function(){d.arrowLeft.fadeIn("fast");d.arrowRight.fadeIn("fast")},function(){d.arrowLeft.fadeOut("fast");d.arrowRight.fadeOut("fast")})}this._by3()}this.sliderWidth=0;this.sliderHeight=0;var m;$(window).bind('resize.rs',function(){if(m)clearTimeout(m);m=setTimeout(function(){d.updateSliderSize()},100)});this.updateSliderSize();this.settings.beforeLoadStart.call(this);var n=this.slidesArr[this.currentSlideId];if(this.currentSlideId!=0){if(!this._fu){this._by.css({'left':-this.currentSlideId*this.slideWidth})}else{this._by.css({'-webkit-transition-duration':'0ms','-webkit-transition-property':'none'});this._by.css({'-webkit-transform':'translate3d('+ -this.currentSlideId*this.slideWidth+'px, 0, 0)'})}}if(this.settings.welcomeScreenEnabled){function hideWelcomeScreen(a){d.settings.loadingComplete.call(d);if(a&&d.settings.preloadNearbyImages){d._cx3(d.currentSlideId)}d.slider.find('.royalLoadingScreen').fadeOut(d.settings.welcomeScreenShowSpeed);setTimeout(function(){d._dw3()},d.settings.welcomeScreenShowSpeed+100)}if(n.preload){this._cx3(this.currentSlideId,function(){hideWelcomeScreen(false)})}else{var o=n.slide.find('img.royalImage')[0];if(o){if(this._ev3(o)){hideWelcomeScreen(true);$(o).css('opacity',0);$(o).animate({"opacity":1},"fast")}else{$('<img />').load(function(){hideWelcomeScreen(true);$(o).css('opacity',0);$(o).animate({"opacity":1},"fast")}).attr('src',o.src)}}else{hideWelcomeScreen(true)}}}else{if(n.preload){this._fu3(n,function(){d.settings.loadingComplete.call(d);if(d.settings.preloadNearbyImages){d._fu3(d.slidesArr[1])}})}else{this.settings.loadingComplete.call(this)}setTimeout(function(){d._dw3()},100)}}RoyalSlider.prototype={goTo:function(a,b,c){if(!this.isAnimating){this.isAnimating=true;var d=this;this.lastSlideId=this.currentSlideId;this.currentSlideId=a;this._by.unbind(this._gt);this._by1=true;if(this.lastSlideId!=a){this._az3(c);this._cx3(a)}this._by3();this.settings.beforeSlideChange.call(this);if(this.slideshowEnabled){if(this.slideshowTimer!=''){this.wasSlideshowPlaying=true;this._ir1()}else{this.wasSlideshowPlaying=false}}var f=!b?this.settings.slideTransitionSpeed:0;if(!this._fu){if(parseInt(this._by.css("left"),10)!==-this.currentSlideId*this.slideWidth){this._by.animate({left:-this.currentSlideId*this.slideWidth},f,this.settings.slideTransitionEasing,function(){d._gt3()})}else{this._gt3()}}else{if(this._hs3()!==-this.currentSlideId*this.slideWidth){this._by.bind("webkitTransitionEnd",function(e){if(e.target==d._by.get(0)){d._gt3();d._by.unbind("webkitTransitionEnd")}});this._by.css({'-webkit-transition-duration':f+"ms",'-webkit-transition-property':'-webkit-transform','-webkit-transition-timing-function':"ease-in-out",'-webkit-transform':'translate3d('+ -this.currentSlideId*this.slideWidth+'px, 0, 0)'})}else{this._gt3()}}}},goToSilent:function(a){this.goTo(a,true)},prev:function(){if(this.currentSlideId<=0){this.goTo(this.numSlides-1)}else{this._ir3()}},next:function(){if(this.currentSlideId>=this.numSlides-1){this.goTo(0)}else{this._jq3()}},updateSliderSize:function(){var a=this;this.sliderWidth=this.slider.width();this.sliderHeight=this.slider.height();if(this.sliderWidth!=this.slideWidth||this.sliderHeight!=this.slideHeight){this.slideWidth=this.sliderWidth+this.settings.slideSpacing;var b=this.slidesArr.length;var c,_lo3;for(var i=0,len=b;i<len;++i){c=this.slidesArr[i];_lo3=c.slide.find("img.royalImage").eq(0);if(_lo3&&c.preload==false){this._mn3(_lo3,this.sliderWidth,this.sliderHeight)}if(this.settings.slideSpacing>0&&i<b-1){c.slide.css({'margin-right':this.settings.slideSpacing})}c.slide.css({height:a.sliderHeight,width:a.sliderWidth})}if(!this._fu){this._by.css({"left":-this.currentSlideId*this.slideWidth,width:this.slideWidth*this.numSlides})}else{this._by.css({'-webkit-transition-duration':'0ms','-webkit-transition-property':'none'});this._by.css({'-webkit-transform':'translate3d('+ -this.currentSlideId*this.slideWidth+'px, 0, 0)',width:this.slideWidth*this.numSlides})}}},stopSlideshow:function(){this._ir1();this.slideshowEnabled=false},resumeSlideshow:function(){this.slideshowEnabled=true;this._jq1()},destroy:function(){this._ir1();this._by.unbind(this._gt);$(document).unbind(this._hs).unbind(this._ir);$(window).unbind('resize.rs');if(this.settings.keyboardNavEnabled){$(document).unbind("keydown.rs")}this.slider.remove()},_cx3:function(a,b){if(this.settings.preloadNearbyImages){var c=this;this._fu3(this.slidesArr[a],function(){if(b){b.call()}c._fu3(c.slidesArr[a+1],function(){c._fu3(c.slidesArr[a-1])})})}else{this._fu3(this.slidesArr[a],b)}},_az3:function(a){if(this.settings.controlNavEnabled){this.navItems.eq(this.lastSlideId).removeClass('current');this.navItems.eq(this.currentSlideId).addClass("current");if(this.settings.controlNavThumbs&&this.settings.controlNavThumbsNavigation){var b=this.navItems.eq(this.currentSlideId).position().left;var c=b-Math.abs(this._kp2);if(c>this._fu2-this._hs2*2-1-this._jq2){if(!a){this._mn2(-b+this._hs2)}else{this._mn2(-b-this._hs2*2+this._fu2+this._jq2)}}else if(c<this._hs2*2-1){if(!a){this._mn2(-b-this._hs2*2+this._fu2+this._jq2)}else{this._mn2(-b+this._hs2)}}}}},_by3:function(){if(this.settings.directionNavEnabled){if(this.settings.hideArrowOnLastSlide){if(this.currentSlideId==0){this._cx4=true;this.arrowLeft.addClass("disabled");if(this._dw4){this._dw4=false;this.arrowRight.removeClass("disabled")}}else if(this.currentSlideId==this.numSlides-1){this._dw4=true;this.arrowRight.addClass("disabled");if(this._cx4){this._cx4=false;this.arrowLeft.removeClass("disabled")}}else{if(this._cx4){this._cx4=false;this.arrowLeft.removeClass("disabled")}else if(this._dw4){this._dw4=false;this.arrowRight.removeClass("disabled")}}}}},_jq1:function(a){if(this.slideshowEnabled){if(this.slideshowTimer==''){if(a){if(!this._az){return}}var b=this;this.slideshowTimer=setInterval(function(){b.next()},this.settings.slideshowDelay);this.isSlideshowRunning=true}}},_ir1:function(a){if(this.slideshowEnabled){if(a){this._az=this.isSlideshowRunning}else{this._az=false;this.isSlideshowRunning=false}clearInterval(this.slideshowTimer);this.slideshowTimer=''}},_fu3:function(a,b){if(a){if(a.preload){var c=this;var d=new Image();var e=$(d);e.css("opacity",0);e.addClass("royalImage");a.slide.prepend(e);a.slide.prepend(this._dw);a.preload=false;e.load(function(){c._mn3(e,c.sliderWidth,c.sliderHeight);e.animate({"opacity":1},"fast");a.slide.find(".royalPreloader").remove();if(b)b.call()});d.src=a.preloadURL}else{if(b)b.call()}}else{if(b)b.call()}},_mn2:function(a){if(a!=this._kp2){if(a<=this._lo2){a=this._lo2;this._cx2=false;this._dw2=true;this.thumbsArrowRight.addClass("disabled");this.thumbsArrowLeft.removeClass("disabled")}else if(a>=0){a=0;this._cx2=true;this._dw2=false;this.thumbsArrowLeft.addClass("disabled");this.thumbsArrowRight.removeClass("disabled")}else{if(this._cx2){this._cx2=false;this.thumbsArrowLeft.removeClass("disabled")}else if(this._dw2){this._dw2=false;this.thumbsArrowRight.removeClass("disabled")}}if(!this._fu){this._ev2.animate({left:a},this.settings.controlNavThumbsSpeed,this.settings.controlNavThumbsEasing)}else{this._ev2.css({'-webkit-transform':'translate3d('+a+'px, 0, 0)'})}this._kp2=a}},_dw3:function(){var a=this;this.slider.find(".royalLoadingScreen").remove();if(this.settings.controlNavEnabled){this.navItems.bind("click",function(e){e.preventDefault();if(!a._by1)a._ev4(e)})}if(this.settings.directionNavEnabled){this.arrowRight.click(function(e){e.preventDefault();if(!a._dw4&&!a._by1)a.next()});this.arrowLeft.click(function(e){e.preventDefault();if(!a._cx4&&!a._by1)a.prev()})}if(this.settings.keyboardNavEnabled){$(document).bind("keydown.rs",function(e){if(!a._by1){if(e.keyCode===37){a.prev()}else if(e.keyCode===39){a.next()}}})}this.wasSlideshowPlaying=true;this._gt3();if(this.slideshowEnabled&&!this.settings.slideshowAutoStart){this._ir1()}this.settings.allComplete.call(this)},_mn1:function(){if(!this.isIE7){this._by.css("cursor",_kp1)}},_fu4:function(){if(!this.isIE7){this._by.css("cursor",_lo1)}},_jq3:function(){if(this.currentSlideId<this.numSlides-1){this.goTo(this.currentSlideId+1)}else{this.goTo(this.currentSlideId)}},_ir3:function(){if(this.currentSlideId>0){this.goTo(this.currentSlideId-1)}else{this.goTo(this.currentSlideId)}},_ev4:function(e){this.goTo($(e.currentTarget).index(),false,true)},_gt4:function(e){if(!this._gt1){var a;if(this.hasTouch){var b=e.originalEvent.touches;if(b&&b.length>0){a=b[0]}else{return false}}else{a=e;e.preventDefault()}if(this.slideshowEnabled){if(this.slideshowTimer!=''){this.wasSlideshowPlaying=true;this._ir1()}else{this.wasSlideshowPlaying=false}}this._fu4();this._gt1=true;var c=this;if(this._fu){c._by.css({'-webkit-transition-duration':'0ms','-webkit-transition-property':'none'})}$(document).bind(this._hs,function(e){c._hs4(e)});$(document).bind(this._ir,function(e){c._ir4(e)});if(!this._fu){this._fu1=this._cx1=parseInt(this._by.css("left"),10)}else{this._fu1=this._cx1=this._hs3()}this._ev=false;this._dw1=a.clientX;this._ev1=a.clientY}return false},_hs3:function(){var a=this._by.css("-webkit-transform");var b=a.replace(/^matrix\(/i,'').split(/, |\)$/g);return parseInt(b[4],10)},_hs4:function(e){var a;if(this.hasTouch){var b=e.originalEvent.touches;if(b.length>1){return false}a=b[0];if(Math.abs(a.clientY-this._ev1)+10>Math.abs(a.clientX-this._dw1)){return false}e.preventDefault()}else{a=e;e.preventDefault()}this._lo=this._kp;var c=a.clientX-this._dw1;if(this._lo!=c){this._kp=c}if(c!=0){if(this.currentSlideId==0){if(c>0){c=Math.sqrt(c)*5}}else if(this.currentSlideId==(this.numSlides-1)){if(c<0){c=-Math.sqrt(-c)*5}}if(!this._fu){this._by.css("left",this._cx1+c)}else{this._by.css({'-webkit-transform':'translate3d('+(this._cx1+c)+'px, 0, 0)'})}}return false},_ir4:function(e){if(this.wasSlideshowPlaying){this._jq1()}if(this._gt1){this._gt1=false;this._mn1();if(!this._fu){this.endPos=parseInt(this._by.css("left"),10)}else{this.endPos=this._hs3()}this.isdrag=false;$(document).unbind(this._hs).unbind(this._ir);if(this.endPos==this._fu1){this._ev=false;return}else{this._ev=true}if(this._fu1-this.settings.minSlideOffset>this.endPos){if(this._lo<this._kp){this.goTo(this.currentSlideId);return false}this._jq3()}else if(this._fu1+this.settings.minSlideOffset<this.endPos){if(this._lo>this._kp){this.goTo(this.currentSlideId);return false}this._ir3()}else{this.goTo(this.currentSlideId)}}return false},_gt3:function(){var a=this;if(this.wasSlideshowPlaying){this._jq1();this.wasSlideshowPlaying=false}this._by1=false;this._by.bind(this._gt,function(e){a._gt4(e)});if(this.settings.captionAnimationEnabled&&this.lastSlideId!=this.currentSlideId){if(this.lastSlideId!=-1){this.slidesArr[this.lastSlideId].caption.css("display","none")}a._jq4(a.currentSlideId)}this.isAnimating=false;this.settings.afterSlideChange.call(this)},_jq4:function(h){var j=this.slidesArr[h].caption;if(j.length){j.css("display","block");var l=this;var m,fadeEnabled,moveEnabled,effectName,effectsObject,moveEffectProperty,currEffects,newEffectObj,moveOffset,delay,speed,easing,moveProp;var n=j.children();if(this.mn.length>0){for(var a=this.mn.length-1;a>-1;a--){clearTimeout(this.mn.splice(a,1))}}if(this._az1.length>0){var o;for(var k=this._az1.length-1;k>-1;k--){o=this._az1[k];if(o){if(!this._fu){if(o.running){o.captionItem.stop(true,true)}else{o.captionItem.css(o.css)}}}this._az1.splice(k,1)}}for(var i=0;i<n.length;i++){m=$(n[i]);effectsObject={};fadeEnabled=false;moveEnabled=false;moveEffectProperty="";if(m.attr("data-show-effect")==undefined){currEffects=this.settings.captionShowEffects}else{currEffects=m.attr("data-show-effect").split(" ")}for(var q=0;q<currEffects.length;q++){if(fadeEnabled&&moveEnabled){break}effectName=currEffects[q].toLowerCase();if(!fadeEnabled&&effectName=="fade"){fadeEnabled=true;effectsObject['opacity']=1}else if(moveEnabled){break}else if(effectName=="movetop"){moveEffectProperty="margin-top"}else if(effectName=="moveleft"){moveEffectProperty="margin-left"}else if(effectName=="movebottom"){moveEffectProperty="margin-bottom"}else if(effectName=="moveright"){moveEffectProperty="margin-right"}if(moveEffectProperty!=""){effectsObject['moveProp']=moveEffectProperty;if(!l._fu){effectsObject['moveStartPos']=parseInt(m.css(moveEffectProperty),10)}else{effectsObject['moveStartPos']=0}moveEnabled=true}}moveOffset=parseInt(m.attr("data-move-offset"),10);if(isNaN(moveOffset)){moveOffset=this.settings.captionMoveOffset}delay=parseInt(m.attr("data-delay"),10);if(isNaN(delay)){delay=l.settings.captionShowDelay*i+10}speed=parseInt(m.attr("data-speed"),10);if(isNaN(speed)){speed=l.settings.captionShowSpeed}easing=m.attr("data-easing");if(!easing){easing=l.settings.captionShowEasing}newEffectObj={};if(moveEnabled){moveProp=effectsObject.moveProp;if(moveProp=="margin-right"){moveProp="margin-left";newEffectObj[moveProp]=effectsObject.moveStartPos+moveOffset}else if(moveProp=="margin-bottom"){moveProp="margin-top";newEffectObj[moveProp]=effectsObject.moveStartPos+moveOffset}else{newEffectObj[moveProp]=effectsObject.moveStartPos-moveOffset}}if(!l._jq&&fadeEnabled){m.css("opacity",0)}if(!l._fu){m.css("visibility","hidden");m.css(newEffectObj);if(moveEnabled){newEffectObj[moveProp]=effectsObject.moveStartPos}if(!l._jq&&fadeEnabled){newEffectObj.opacity=1}}else{var p={};if(moveEnabled){p['-webkit-transition-duration']="0ms";p['-webkit-transition-property']="none";p["-webkit-transform"]="translate3d("+(isNaN(newEffectObj["margin-left"])?0:(newEffectObj["margin-left"]+"px"))+", "+(isNaN(newEffectObj["margin-top"])?0:(newEffectObj["margin-top"]+"px"))+",0)";delete newEffectObj["margin-left"];delete newEffectObj["margin-top"];newEffectObj["-webkit-transform"]="translate3d(0,0,0)"}newEffectObj.visibility="visible";if(!l._jq&&fadeEnabled){newEffectObj.opacity=1;p["opacity"]=0}p["visibility"]="hidden";m.css(p)}this._az1.push({captionItem:m,css:newEffectObj,running:false});this.mn.push(setTimeout((function(a,b,c,d,e,f,g){return function(){l._az1[e].running=true;if(!l._fu){a.css("visibility","visible").animate(b,c,d,function(){delete l._az1[e]})}else{a.css({'-webkit-transition-duration':(speed+"ms"),'-webkit-transition-property':'opacity, -webkit-transform','-webkit-transition-timing-function':'ease-out'});a.css(b)}}})(m,newEffectObj,speed,easing,i,fadeEnabled,moveEnabled),delay))}}},_mn3:function(f,g,h){var i=this.settings.imageScaleMode;var j=this.settings.imageAlignCenter;if(j||i=="fill"||i=="fit"){var k=false;function scaleImg(){var a,vRatio,ratio,nWidth,nHeight;var b=new Image();b.src=f.attr("src");var c=b.width;var d=b.height;var e=parseInt(f.css("borderWidth"),10);e=isNaN(e)?0:e;if(isNaN(c)||isNaN(d)||c===0||d===0){if(!k){$('<img />').load(function(){k=true;scaleImg()}).attr('src',b.src);return}}if(i=="fill"||i=="fit"){a=g/c;vRatio=h/d;if(i=="fill"){ratio=a>vRatio?a:vRatio}else if(i=="fit"){ratio=a<vRatio?a:vRatio}else{ratio=1}nWidth=parseInt(c*ratio,10)-e;nHeight=parseInt(d*ratio,10)-e;f.attr({"width":nWidth,"height":nHeight}).css({"width":nWidth,"height":nHeight})}else{nWidth=c-e;nHeight=d-e}if(j){f.css({"margin-left":Math.floor((g-nWidth)/2),"margin-top":Math.floor((h-nHeight)/2)})}f.css("visibility","visible")};f.css("visibility","hidden");f.removeAttr('height').removeAttr('width');if(!this._ev3(f.get(0))){$('<img />').load(function(){scaleImg()}).attr('src',f.attr("src"))}else{scaleImg()}}},_ev3:function(a){if(a){if(!a.complete){return false}if(typeof a.naturalWidth!="undefined"&&a.naturalWidth==0){return false}}else{return false}return true}};$.fn.royalSlider=function(b){return this.each(function(){var a=new RoyalSlider($(this),b);$(this).data("royalSlider",a)})};$.fn.royalSlider.defaults={preloadNearbyImages:true,imageScaleMode:"none",imageAlignCenter:false,keyboardNavEnabled:false,directionNavEnabled:true,directionNavAutoHide:false,hideArrowOnLastSlide:false,slideTransitionSpeed:400,slideTransitionEasing:"easeInOutSine",captionAnimationEnabled:true,captionShowEffects:["fade","moveleft"],captionMoveOffset:20,captionShowSpeed:400,captionShowEasing:"easeOutCubic",captionShowDelay:200,controlNavEnabled:true,controlNavThumbs:false,controlNavThumbsNavigation:true,controlNavThumbsSpeed:400,controlNavThumbsEasing:"easeInOutSine",slideshowEnabled:false,slideshowDelay:5000,slideshowPauseOnHover:true,slideshowAutoStart:true,welcomeScreenEnabled:true,welcomeScreenShowSpeed:500,minSlideOffset:20,disableTranslate3d:false,removeCaptionsOpacityInIE8:false,startSlideIndex:0,slideSpacing:0,blockLinksOnDrag:true,nonDraggableClassEnabled:false,beforeSlideChange:function(){},afterSlideChange:function(){},beforeLoadStart:function(){},loadingComplete:function(){},allComplete:function(){}};$.fn.royalSlider.settings={}})(jQuery);